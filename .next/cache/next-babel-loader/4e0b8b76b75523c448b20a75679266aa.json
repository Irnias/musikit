{"ast":null,"code":"var __jsx = React.createElement;\nimport 'isomorphic-fetch';\nimport React from 'react';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { setToken, setUserData, setCurrentlyPlaying, setUserPlaylists, setFeaturedPlaylists, setTopArtists } from \"../store\";\nimport Header from '../components/Header';\nimport Aside from '../components/Aside';\nimport Principal from '../components/Principal';\n\nclass Main extends React.Component {\n  async componentDidMount() {\n    const {\n      dispatch\n    } = this.props;\n    const hash = window.location.hash.substring(1).split(\"&\").reduce(function (initial, item) {\n      if (item) {\n        var parts = item.split(\"=\");\n        initial[parts[0]] = decodeURIComponent(parts[1]);\n      }\n\n      return initial;\n    }, {}); //Axiios fetch\n\n    const nameRequest = await axios.get(\"https://api.spotify.com/v1/me\", {\n      headers: {\n        Authorization: \"Bearer \" + hash.access_token\n      }\n    });\n    const userPlaylistsRequest = await axios.get(\"https://api.spotify.com/v1/me/playlists\", {\n      headers: {\n        Authorization: \"Bearer \" + hash.access_token\n      }\n    });\n    const currentlyPlayingRequest = await axios.get(\"https://api.spotify.com/v1/me/player\", {\n      headers: {\n        Authorization: \"Bearer \" + hash.access_token\n      }\n    });\n    const featuredPlaylistsRequest = await axios.get(\"https://api.spotify.com/v1/browse/featured-playlists\", {\n      headers: {\n        Authorization: \"Bearer \" + hash.access_token\n      }\n    });\n    const topArtistsRequest = await axios.get(\"https://api.spotify.com/v1/me/top/artists\", {\n      headers: {\n        Authorization: \"Bearer \" + hash.access_token\n      }\n    });\n    dispatch(setToken(hash.access_token));\n    dispatch(setUserData(nameRequest.data));\n    dispatch(setUserPlaylists(userPlaylistsRequest.data.items));\n    dispatch(setCurrentlyPlaying(currentlyPlayingRequest.data));\n    dispatch(setFeaturedPlaylists(featuredPlaylistsRequest.data));\n    dispatch(setTopArtists(topArtistsRequest.data.items));\n  }\n\n  render() {\n    return __jsx(React.Fragment, null, __jsx(Header, {\n      title: \"MusikIT | Main\"\n    }), __jsx(Aside, null), __jsx(Principal, null));\n  }\n\n}\n\nexport default connect()(Main);","map":{"version":3,"sources":["C:/Users/r.n.daccorso.rosati/OneDrive - est.frba.utn.edu.ar/Curso/CourseIT/musikit/pages/main.js"],"names":["React","axios","connect","setToken","setUserData","setCurrentlyPlaying","setUserPlaylists","setFeaturedPlaylists","setTopArtists","Header","Aside","Principal","Main","Component","componentDidMount","dispatch","props","hash","window","location","substring","split","reduce","initial","item","parts","decodeURIComponent","nameRequest","get","headers","Authorization","access_token","userPlaylistsRequest","currentlyPlayingRequest","featuredPlaylistsRequest","topArtistsRequest","data","items","render"],"mappings":"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","sourcesContent":["import 'isomorphic-fetch'\r\nimport React from 'react'\r\nimport axios from 'axios'\r\nimport { connect } from \"react-redux\"\r\nimport { setToken, setUserData, setCurrentlyPlaying, setUserPlaylists, setFeaturedPlaylists, setTopArtists } from \"../store\"\r\nimport Header from '../components/Header'\r\nimport Aside from '../components/Aside'\r\nimport Principal from '../components/Principal'\r\n\r\n\r\nclass Main extends React.Component {\r\n\r\n  async componentDidMount() {\r\n\r\n    const { dispatch } = this.props;\r\n\r\n    const hash = window.location.hash\r\n     .substring(1)\r\n      .split(\"&\")\r\n      .reduce(function(initial, item) {\r\n        if (item) {\r\n          var parts = item.split(\"=\");\r\n          initial[parts[0]] = decodeURIComponent(parts[1]);\r\n        }\r\n        return initial;\r\n      }, {}\r\n    );\r\n    \r\n    //Axiios fetch\r\n    const nameRequest =               await axios.get(\"https://api.spotify.com/v1/me\",                        { headers: { Authorization: \"Bearer \" + hash.access_token}})\r\n    const userPlaylistsRequest =      await axios.get(\"https://api.spotify.com/v1/me/playlists\",              { headers: { Authorization: \"Bearer \" + hash.access_token}})\r\n    const currentlyPlayingRequest =   await axios.get(\"https://api.spotify.com/v1/me/player\",                 { headers: { Authorization: \"Bearer \" + hash.access_token}})\r\n    const featuredPlaylistsRequest =  await axios.get(\"https://api.spotify.com/v1/browse/featured-playlists\", { headers: { Authorization: \"Bearer \" + hash.access_token}})\r\n    const topArtistsRequest =         await axios.get(\"https://api.spotify.com/v1/me/top/artists\",            { headers: { Authorization: \"Bearer \" + hash.access_token}})\r\n\r\n    dispatch(setToken(hash.access_token));\r\n    dispatch(setUserData(nameRequest.data));\r\n    dispatch(setUserPlaylists(userPlaylistsRequest.data.items));\r\n    dispatch(setCurrentlyPlaying(currentlyPlayingRequest.data));\r\n    dispatch(setFeaturedPlaylists(featuredPlaylistsRequest.data));\r\n    dispatch(setTopArtists(topArtistsRequest.data.items));\r\n\r\n  }\r\n\r\n  render(){\r\n    return( \r\n      <React.Fragment>\r\n          <Header title=\"MusikIT | Main\" />\r\n          <Aside />\r\n          <Principal />\r\n          {/* <Player /> */}\r\n        </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect()(Main)"]},"metadata":{},"sourceType":"module"}